---
title: VMware的三种网络模式
date: 2017-11-12 17:59:46
categories:
- 网络
---

## 前言
实验室新来的学弟学妹们没有相关的计算机网络概念，在VMware安装好后，遇到没有网络的情况经常不知道怎么办。

其实一般虚拟机安装好之后，会自动添加两张网卡(VMnet1和VMnet8),VMnet1是用户通过Host-only的网络连接，VMnet8是通过NAT方式的网络连接。以下所说的是VMware常用的三种网络模式。

## Bridged 桥接模式
### 特点
虚拟机和主机是处于同等地位的机器，所以网络功能也无异于主机。并且和主机处于同一网段。
### 原理
桥接模式，使用的是VMnet0虚拟网卡。

vmnet0实际上就是一个虚拟的网桥(2层交换机)，这个网桥有若干个接口，一个端口用于连接你的Host主机，其余端口可以用于连接虚拟机，他们的位置是对等的，谁也不是谁的网关。所以桥接模式下，虚拟机和Host主机是同等地位的主机。
![vmnet0](https://s1.ax1x.com/2018/04/05/CCA839.png)
### 示例图
主机A上的两个虚拟机1和虚拟机2，和主机A、B同处于一个网段，能够相互通信
![vmnet0_1](https://s1.ax1x.com/2018/04/05/CCAJj1.png)
这个模式在一般局域网常用到，但是在寝室园区使用桥接的话，由于需要认证才能上网，所以不能使用这种方式

## Host-only模式
### 特点
只能和主机相互通信，不能上网，也不能访问其他主机，用于建立与外部隔离的网络环境
### 原理
Host-only模式使用的是VMnet1网卡。

这种方式下，虚拟机连接到VMnet1上，但系统并不为其提供任何路由服务，因此虚拟机只能和宿主机进行通信，而不能连接到真正的网络上。

### 示例图
虚拟机1和2之间可以相互通信，主机A能和虚拟机1和2通信，虚拟机1和2不能和主机通信(需要设置)，虚拟机不能和B主机以及外网通信
![vmnet1](http://imglf3.nosdn.127.net/img/c09lVS9TR3YrUGFJMjN6QVRFOGJsc00vRVdkTk1RYStvSUhHMWwwZUZsOSsvNVZ3RGJOQ3pnPT0.png?imageView&thumbnail=500x0&quality=96&stripmeta=0)
这个模式连接不到网络，但是它是NAT模式的基础

## NAT模式
### 特点
> 1. 主机ping不通虚拟机(包括宿主)
> 2. 同一宿主的虚拟机可以相互ping通
> 3. 宿主能够联网，虚拟机也能联网(其他主机)。宿主没有联网，虚拟机也不能联网
> 4. 虚拟机能够ping通主机,其他主机不能访问虚拟机

### 原理
网络地址转换类似于家庭路由器的方式工作。使用NAT模式，就是让虚拟系统借助NAT（网路地址转换）功能，通过宿主机器所在的网络来访问公网。

其实就是虚拟机的网卡连接到宿主的VMnet8虚拟机交换机上，VMnet8充当了路由器的作用，负责将虚拟机转发到VMnet8的包进行地址转换之后发送到实际的网络中，再将实际网络上返回的包进行地址转换后通过VMnet8发送给虚拟机。

它相比Host-only模式只不过增加一层路由功能。
### 示例图
主机A和虚拟机1和2能相互通信，虚拟机1和2能访问主机B和外网，主机B不能访问虚拟机1和2，虚拟机1和2能相互通信
![vmnet8](https://s1.ax1x.com/2018/04/05/CCAgDP.png)
![NAT](https://s1.ax1x.com/2018/04/05/CCA2Hf.png)
一般在学校的环境下（连接因特网需要锐捷认证），使用这种模式虚拟机就能快捷地连接到因特网。




